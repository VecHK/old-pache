var Markdown;if(typeof exports==="object"&&typeof require==="function"){Markdown=exports}else{Markdown={}}(function(){function c(e){return e}function d(e){return false}function b(){}b.prototype={chain:function(g,f){var e=this[g];if(!e){throw new Error("unknown hook "+g)}if(e===c){this[g]=f}else{this[g]=function(i){var h=Array.prototype.slice.call(arguments,0);h[0]=e.apply(null,h);return f.apply(null,h)}}},set:function(f,e){if(!this[f]){throw new Error("unknown hook "+f)}this[f]=e},addNoop:function(e){this[e]=c},addFalse:function(e){this[e]=d}};Markdown.HookCollection=b;function a(){}a.prototype={set:function(e,f){this["s_"+e]=f},get:function(e){return this["s_"+e]}};Markdown.Converter=function(){var l=this.hooks=new b();l.addNoop("plainLinkText");l.addNoop("preConversion");l.addNoop("postNormalization");l.addNoop("preBlockGamut");l.addNoop("postBlockGamut");l.addNoop("preSpanGamut");l.addNoop("postSpanGamut");l.addNoop("postConversion");var y;var p;var e;var B;this.makeHtml=function(R){if(y){throw new Error("Recursive call to converter.makeHtml")}y=new a();p=new a();e=[];B=0;R=l.preConversion(R);R=R.replace(/~/g,"~T");R=R.replace(/\$/g,"~D");R=R.replace(/\r\n/g,"\n");R=R.replace(/\r/g,"\n");R="\n\n"+R+"\n\n";R=L(R);R=R.replace(/^[ \t]+$/mg,"");R=l.postNormalization(R);R=q(R);R=o(R);R=h(R);R=O(R);R=R.replace(/~D/g,"$$");R=R.replace(/~T/g,"~");R=l.postConversion(R);e=p=y=null;return R};function o(R){R=R.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(U,W,V,T,S,X){W=W.toLowerCase();y.set(W,E(V));if(S){return T}else{if(X){p.set(W,X.replace(/"/g,"&quot;"))}}return""});return R}function q(T){var S="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del";var R="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math";T=T.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,Q);T=T.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,Q);T=T.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,Q);T=T.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,Q);T=T.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,Q);return T}function Q(R,S){var T=S;T=T.replace(/^\n+/,"");T=T.replace(/\n+$/g,"");T="\n\n~K"+(e.push(T)-1)+"K\n\n";return T}var g=function(R){return h(R)};function h(T,S){T=l.preBlockGamut(T,g);T=k(T);var R="<hr />\n";T=T.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,R);T=T.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,R);T=T.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,R);T=N(T);T=s(T);T=i(T);T=l.postBlockGamut(T,g);T=q(T);T=K(T,S);return T}function m(R){R=l.preSpanGamut(R);R=t(R);R=x(R);R=J(R);R=F(R);R=G(R);R=M(R);R=R.replace(/~P/g,"://");R=E(R);R=z(R);R=R.replace(/  +\n/g," <br>\n");R=l.postSpanGamut(R);return R}function x(S){var R=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi;S=S.replace(R,function(U){var T=U.replace(/(.)<\/?code>(?=.)/g,"$1`");T=A(T,U.charAt(1)=="!"?"\\`*_/":"\\`*_");return T});return S}function G(R){R=R.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,j);R=R.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,j);R=R.replace(/(\[([^\[\]]+)\])()()()()()/g,j);return R}function j(X,ad,ac,ab,aa,Z,W,V){if(V==undefined){V=""}var U=ad;var S=ac.replace(/:\/\//g,"~P");var T=ab.toLowerCase();var R=aa;var Y=V;if(R==""){if(T==""){T=S.toLowerCase().replace(/ ?\n/g," ")}R="#"+T;if(y.get(T)!=undefined){R=y.get(T);if(p.get(T)!=undefined){Y=p.get(T)}}else{if(U.search(/\(\s*\)$/m)>-1){R=""}else{return U}}}R=C(R);R=A(R,"*_");var ae='<a href="'+R+'"';if(Y!=""){Y=I(Y);Y=A(Y,"*_");ae+=' title="'+Y+'"'}ae+=">"+S+"</a>";return ae}function F(R){R=R.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,H);R=R.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,H);return R}function I(R){return R.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function H(X,ad,ac,ab,aa,Z,W,V){var U=ad;var T=ac;var S=ab.toLowerCase();var R=aa;var Y=V;if(!Y){Y=""}if(R==""){if(S==""){S=T.toLowerCase().replace(/ ?\n/g," ")}R="#"+S;if(y.get(S)!=undefined){R=y.get(S);if(p.get(S)!=undefined){Y=p.get(S)}}else{return U}}T=A(I(T),"*_[]()");R=A(R,"*_");var ae='<img src="'+R+'" alt="'+T+'"';Y=I(Y);Y=A(Y,"*_");ae+=' title="'+Y+'"';ae+=" />";return ae}function k(R){R=R.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(S,T){return"<h1>"+m(T)+"</h1>\n\n"});R=R.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(T,S){return"<h2>"+m(S)+"</h2>\n\n"});R=R.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(S,V,U){var T=V.length;return"<h"+T+">"+m(U)+"</h"+T+">\n\n"});return R}function N(S){S+="~0";var R=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;if(B){S=S.replace(R,function(U,X,W){var Y=X;var V=(W.search(/[*+-]/g)>-1)?"ul":"ol";var T=n(Y,V);T=T.replace(/\s+$/,"");T="<"+V+">"+T+"</"+V+">\n";return T})}else{R=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g;S=S.replace(R,function(V,Z,X,U){var Y=Z;var aa=X;var W=(U.search(/[*+-]/g)>-1)?"ul":"ol";var T=n(aa,W);T=Y+"<"+W+">\n"+T+"</"+W+">\n";return T})}S=S.replace(/~0/,"");return S}var r={ol:"\\d+[.]",ul:"[*+-]"};function n(T,S){B++;T=T.replace(/\n{2,}$/,"\n");T+="~0";var R=r[S];var U=new RegExp("(^[ \\t]*)("+R+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+R+")[ \\t]+))","gm");var V=false;T=T.replace(U,function(X,Z,Y,W){var ac=W;var ad=Z;var ab=/\n\n$/.test(ac);var aa=ab||ac.search(/\n{2,}/)>-1;if(aa||V){ac=h(v(ac),true)}else{ac=N(v(ac));ac=ac.replace(/\n$/,"");ac=m(ac)}V=ab;return"<li>"+ac+"</li>\n"});T=T.replace(/~0/g,"");B--;return T}function s(R){R+="~0";R=R.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(S,U,T){var V=U;var W=T;V=D(v(V));V=L(V);V=V.replace(/^\n+/g,"");V=V.replace(/\n+$/g,"");V="<pre><code>"+V+"\n</code></pre>";return"\n\n"+V+"\n\n"+W});R=R.replace(/~0/,"");return R}function P(R){R=R.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(e.push(R)-1)+"K\n\n"}function t(R){R=R.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(U,W,V,T,S){var X=T;X=X.replace(/^([ \t]*)/g,"");X=X.replace(/[ \t]*$/g,"");X=D(X);X=X.replace(/:\/\//g,"~P");return W+"<code>"+X+"</code>"});return R}function D(R){R=R.replace(/&/g,"&amp;");R=R.replace(/</g,"&lt;");R=R.replace(/>/g,"&gt;");R=A(R,"*_{}[]\\",false);return R}function z(R){R=R.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1<strong>$3</strong>$4");R=R.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1<em>$3</em>$4");return R}function i(R){R=R.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(S,T){var U=T;U=U.replace(/^[ \t]*>[ \t]?/gm,"~0");U=U.replace(/~0/g,"");U=U.replace(/^[ \t]+$/gm,"");U=h(U);U=U.replace(/(^|\n)/g,"$1  ");U=U.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(V,W){var X=W;X=X.replace(/^  /mg,"~0");X=X.replace(/~0/g,"");return X});return P("<blockquote>\n"+U+"\n</blockquote>")});return R}function K(Y,R){Y=Y.replace(/^\n+/g,"");Y=Y.replace(/\n+$/g,"");var Z=Y.split(/\n{2,}/g);var W=[];var S=/~K(\d+)K/;var T=Z.length;for(var U=0;U<T;U++){var V=Z[U];if(S.test(V)){W.push(V)}else{if(/\S/.test(V)){V=m(V);V=V.replace(/^([ \t]*)/g,"<p>");V+="</p>";W.push(V)}}}if(!R){T=W.length;for(var U=0;U<T;U++){var X=true;while(X){X=false;W[U]=W[U].replace(/~K(\d+)K/g,function(aa,ab){X=true;return e[ab]})}}}return W.join("\n\n")}function E(R){R=R.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");R=R.replace(/<(?![a-z\/?!]|~D)/gi,"&lt;");return R}function J(R){R=R.replace(/\\(\\)/g,u);R=R.replace(/\\([`*_{}\[\]()>#+-.!])/g,u);return R}function f(V,X,Z,U){if(X){return V}if(U.charAt(U.length-1)!==")"){return"<"+Z+U+">"}var W=U.match(/[()]/g);var R=0;for(var S=0;S<W.length;S++){if(W[S]==="("){if(R<=0){R=1}else{R++}}else{R--}}var T="";if(R<0){var Y=new RegExp("\\){1,"+(-R)+"}$");U=U.replace(Y,function(aa){T=aa;return""})}return"<"+Z+U+">"+T}function M(S){S=S.replace(/(="|<)?\b(https?|ftp)(:\/\/[-A-Z0-9+&@#\/%?=~_|\[\]\(\)!:,\.;]*[-A-Z0-9+&@#\/%=~_|\[\])])(?=$|\W)/gi,f);var R=function(U,T){return'<a href="'+T+'">'+l.plainLinkText(T)+"</a>"};S=S.replace(/<((https?|ftp):[^'">\s]+)>/gi,R);return S}function O(R){R=R.replace(/~E(\d+)E/g,function(S,U){var T=parseInt(U);return String.fromCharCode(T)});return R}function v(R){R=R.replace(/^(\t|[ ]{1,4})/gm,"~0");R=R.replace(/~0/g,"");return R}function L(U){if(!/\t/.test(U)){return U}var T=["    ","   ","  "," "],S=0,R;return U.replace(/[\n\t]/g,function(V,W){if(V==="\n"){S=W+1;return V}R=(W-S)%4;S=W+1;return T[R]})}var w=/(?:["'*()[\]:]|~D)/g;function C(S){if(!S){return""}var R=S.length;return S.replace(w,function(T,U){if(T=="~D"){return"%24"}if(T==":"){if(U==R-1||/[0-9\/]/.test(S.charAt(U+1))){return":"}}return"%"+T.charCodeAt(0).toString(16)})}function A(V,S,T){var R="(["+S.replace(/([\[\]\\])/g,"\\$1")+"])";if(T){R="\\\\"+R}var U=new RegExp(R,"g");V=V.replace(U,u);return V}function u(R,T){var S=T.charCodeAt(0);return"~E"+S+"E"}}})();
