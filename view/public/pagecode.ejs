<%
html = '';

let countPage = Math.ceil(count / limit),
	cursor = page - 2,
	right = page + 2;

if (cursor <= 0){
	right += Math.abs(cursor) + 1;
	cursor = 1;
}

if (right > countPage){
	cursor -= Math.abs(right-countPage);
	if (cursor <= 0){
		cursor = 1;
	}
	right = countPage;
}


for (; cursor<=right; ++cursor){
	if ( page === cursor ){
		%>
		<a class="pagecode current"><div class="code"><%= cursor %></div><div class="bg"></div></a><%
	}else{
		if (typeof(tags) === 'string') {
			var tagHref = '/notags/';
		} else if (typeof(tags) === 'undefined') {
			var tagHref = '/';
		} else if (Array.isArray(tags)){
			console.info('asjfslkafj');
			var tagHref = 'tags/' + tags.join(',') + '/';
		}
		%>
		<a class="pagecode" href="<%= tagHref %><%= cursor %>"><%= cursor %></a><%
	}
}
%>
